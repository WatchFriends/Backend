<div class="container-fluid" *ngIf="user">
    <div class="row bg-splice">
        <img [src]="backgroundProfile" alt="Profile Background" />
    </div>

    <div class="container">
        <div class="container-profile">
            <img [src]="user.picture | userImage" alt="Profile" />
            <h1><span class="bold">{{user.name.givenName}}</span> {{user.name.middleName}} {{user.name.familyName}}</h1>
            <p class="h4">Followed by {{user.followers.length}} people</p>
            <p class="h4">Follows {{user.follows.length}} people</p>
            <a *ngIf="!myProfile" class="btn btn-lg" [class.btn-success]="!isFollowing" [class.btn-warning]="isFollowing" 
            (click)="updateFollowing(!isFollowing)"><span class="glyphicon glyphicon-user"></span> {{ isFollowing ? 'Unfollow' : 'Follow' }}</a>
            <a class="btn btn-success" *ngIf="myProfile" routerLink="/settings"><span class="glyphicon glyphicon-cog"></span>  Settings</a>
        </div>
    </div>

    <tabset>
        <tab>
            <template tabHeading>
                Watchlist <span class="shadow-submenu_counter">{{user.watchlist.length}}</span>
            </template>
            <wf-series [series]="user.watchlist"></wf-series>
        </tab>
        <tab>
            <template tabHeading>
                Achievements <span class="shadow-submenu_counter">{{user.achievements.length}}</span>
            </template>
            <div *ngIf="user.achievements.length != 0">
                <div *ngFor="let item of user.achievements; let i = index" class="achievementscontainer">
                    <h3>{{item.name}} ({{item.status}})</h3>
                    <p class="h4">{{transformDescription(item.description, item.collected)}}</p>
                    <div [innerHTML]="transformHtml(item.image)" [class]="item.status"></div>
                    <div *ngIf="item.status != 'gold'">
                        <p class="bold h4">Progress till next achievement:</p>
                    </div>
                    <div *ngIf="item.status == 'gold'">
                        <p class="bold h4">Completed!</p>
                    </div>
                    <p class="h4">{{item.progress}}/{{item.next}}</p>
                </div>
            </div>
        </tab>
    </tabset>

</div>
